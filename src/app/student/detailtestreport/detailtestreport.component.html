<div>
    <h1 style="text-align: center; margin-top: 2em;">Here is your detail performance report
    </h1>
    <div class="float-container">
        <div class="float-child">
            <div class ="row">
                <div class ="col-md-4">
                    <b>TestId:</b> {{testId}}
                </div>
                <div class ="col-md-4">
                    <b>Test Name:</b> {{testToShowInTable.testName}}
                </div>
            </div>
            <div class ="row" style="margin-bottom: 1em;">
                <div class ="col-md-4">
                    <b>Test Holder:</b> {{testToShowInTable.testTakenBy}}
                </div>
                <div class ="col-md-4">
                    <b>Date:</b> {{testTakenDate | date:'yyyy/MM/dd' }}
                </div>
            </div>
            <div class="green">
            <div style="float: right; margin-right: 2em; margin-bottom: 1em;">
                <button mat-raised-button style="margin-left: 1em;" (click)="exporter.exportTable('xlsx', {fileName:'test', sheet: 'sheet_name', Props: {Author: 'OnlineExam'}})">Excel</button>
                <button mat-raised-button style="margin-left: 1em;" (click)="exporter.exportTable('csv')">Csv</button>
                <button mat-raised-button style="margin-left: 1em;" (click)="exporter.exportTable('json')">Json</button>
                <button mat-raised-button style="margin-left: 1em;" (click)="exporter.exportTable('txt')">Txt</button>
                <button mat-raised-button style="margin-left: 1em;" [useExistingCss]="true" printTitle="Your Test Result" printSectionId="content" ngxPrint>Pdf</button> 
            </div>
            <div style="clear: both;">
            </div>
            <div [ngClass]="'mat-elevation-z8'" class="table-contents" id="content" #content>
                <mat-table multiTemplateDataRows [ngClass]="'styled-table'" matTableExporter [dataSource] = "dataSource"  #exporter="matTableExporter"> 
                    <ng-container matColumnDef="no">
                        <mat-header-cell [ngClass]="'table-header-class'" *matHeaderCellDef> No </mat-header-cell>
                        <mat-cell *matCellDef="let element; let i = dataIndex;"> 
                            <span class="mobile-label">No:</span>
                            {{this.paginator.pageIndex* this.paginator.pageSize + i + 1 }}
                        </mat-cell>
                    </ng-container>
        
                    <ng-container matColumnDef="question">
                        <mat-header-cell [ngClass]="'table-header-class'" *matHeaderCellDef> Question </mat-header-cell>
                        <mat-cell *matCellDef="let element"> 
                            <span class="mobile-label">Question:</span>
                            {{element.question}} 
                        </mat-cell>
                    </ng-container>
        
                    <ng-container matColumnDef="selectedOption">
                        <mat-header-cell [ngClass]="'table-header-class'" *matHeaderCellDef> Selected Option </mat-header-cell>
                        <mat-cell *matCellDef="let element"> 
                            <span class="mobile-label">Selected Option:</span>
                            {{element.selectedOption}} 
                        </mat-cell>
                    </ng-container>
        
                    <ng-container matColumnDef="correctAnswer">
                        <mat-header-cell [ngClass]="'table-header-class'" *matHeaderCellDef> Correct Answer </mat-header-cell>
                        <mat-cell *matCellDef="let element"> 
                            <span class="mobile-label">Correct Answer:</span>
                            {{element.correctAnswer}} 
                        </mat-cell>
                    </ng-container>
        
                    <ng-container matColumnDef="result">
                        <mat-header-cell [ngClass]="['table-header-class','quest-width']" *matHeaderCellDef> Result </mat-header-cell>
                        <mat-cell [ngClass]="'quest-width'" *matCellDef="let element">
                            <span class="mobile-label">Result:</span>
                            <div> 
                                <mat-icon *ngIf ='element.correctAnswer === element.selectedOption' style="color: green;">done</mat-icon>
                                <mat-icon *ngIf ='element.selectedOption!== null && element.correctAnswer !== element.selectedOption' style="color: red;">close</mat-icon>
                                <mat-icon *ngIf ='element.selectedOption === null' style="color: green;">question_mark</mat-icon> 
                            </div>
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="subjectTags">
                        <mat-header-cell [ngClass]="'table-header-class'" *matHeaderCellDef> Subject Tag </mat-header-cell>
                        <mat-cell *matCellDef="let element"> 
                            <span class="mobile-label"> Subject Tag:</span>
                            <!-- {{element.subjectTags[0]}}  -->
                            <button disabled class="btn" style="margin-right: 1em; background-color: green; color: white;" 
                            *ngFor="let subjectTag of element.subjectTags">{{subjectTag}}</button>
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="topicTags">
                        <mat-header-cell [ngClass]="'table-header-class'" *matHeaderCellDef> Topic Tag </mat-header-cell>
                        <mat-cell *matCellDef="let element"> 
                            <span class="mobile-label">Topic Tag:</span>
                            <!-- {{element.topicTags[0]}}  -->
                            <div style="display: inline; float: left;">
                                <button disabled class="btn" style="margin: 0.2em; background-color: red; color: white; display: inline;" 
                                    *ngFor="let topicTag of element.topicTags">{{topicTag}}
                                </button>
                            </div>
                        </mat-cell>
                    </ng-container>

                    <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
                    <ng-container matColumnDef="expandedDetail">
                        <td mat-cell *matCellDef="let element" [attr.colspan]="displayedColumns.length">
                        <div class="example-element-detail"
                            [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
                            <div class="example-element-diagram float-container">
                                <div style="display: flex; float: left;">
                                    <h3 style="margin-right: 2em;">
                                        <b>All options:</b> 
                                        <ng-container style="float: left;" *ngFor="let option of element.options">
                                            {{option}}
                                        </ng-container>
                                    </h3>

                                    <!-- <div> -->
                                        <h3>
                                            <b>Total Time Spent:</b>
                                        {{element.totalTimeSpent}} seconds
                                        </h3> 
                                    <!-- </div> -->

                                </div>
                                
                            </div>
                        </div>
                        </td>
                    </ng-container>
        
                    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                    <mat-row *matRowDef="let element; columns: displayedColumns;"
                    class="example-element-row"
                    [class.example-expanded-row]="expandedElement === element"
                    (click)="expandedElement = expandedElement === element ? null : element">
                    </mat-row>
                    <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
        
                    
                </mat-table>
                <mat-paginator [ngClass]="'styled-paginator'" [pageSize]="5" [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
            </div>
            </div>
        </div>
        
        <div class="float-child">
            <h1 style="text-align: center;">Chart Based Analysis</h1>
            <div class="float-container">
            <!-- <table class="columns" style="display: inline; text-align: center; align-items: center;"> -->
                <!-- <tr> -->
                    <!-- <td> -->
                        <div class="float-child" id="subject_chart_div" style="width: 21em; height: 20em; margin-top: 8em;">
                        </div>
                    <!-- </td> -->
                    <!-- <td> -->
                        <div class="float-child" id="topic_chart_div" style="width: 21em; height: 20em; margin-top: 8em;">
                        </div>
                    <!-- </td> -->
                <!-- </tr> -->
            <!-- </table> -->
            </div>
        </div>   
    </div>   
</div>
    